<hml>
    <head>
            <script src='https://code.jquery.com/jquery-1.11.3.min.js'></script>
            <script src='carnival.js'></script>
    </head>
    <body>
    <select id="team">
        <option value="team1">team1</option>
        <option value="team2" selected="selected">team2</option>
        <option value="team3">team3</option>
    </select>
    <button id="generate">Generate</button>
    <h1>Bearingpoint RISK IT</h1>        
    <div class="round" id="round1">
        <form id="round1">
        <h2>SMART Objectives</h2>
        <span id="round1objectivespoints">0</span> remaining points
        <p>
            <ul>
            <li>Each objective has a minimum cost of <span id="objectivecost">0</span></li>
            <li>Each non-objective freeze resources on it  ?</li>
            </ul>
        </p>
            <div>
                <table>
                    <tr>
                        <th>from</th>
                        <th>to</th>
                        <th>measurable</th>
                        <th>achievable</th>
                        <th>realistic</th>
                        <th>time/speed</th>
                    </tr>
                    <tr>
                        <td><select id="round1objective1from"></select></td>
                        <td><select id="round1objective1to"></select></td>
                        <td><select id="round1objective1resourcecount"></select></td>
                        <td>achievable</td>
                        <td>realistic</td>
                        <td>time/speed</td>
                    </tr>
                </table>
            </div>
            <div>
                <div id="round1objective1route"></div>
            </div>
        <h2>Stakeholder</h2>
        <h2>Risks</h2>
        </form>
    </div>
    <div class="round" id="round2">

    </div>
    <div class="round" id="round3">

    </div>
    <script>

        $(document).ready(()=>{
            roundDomReady();
        });

        $('#generate').click(()=>{
            var team = $('#team').val();
            settings = {
                "async": true,
                "crossDomain": true,
                "url": "http://localhost:3000/teams/generate/" + team,
                "method": "POST"
            }

            $.ajax(settings).done(function (response) {
                console.log(response);
            });
        });

        $('#round1objective1to').change(()=> {
            displayTerritoryRoute();
        });

        $('#round1objective1from').change(()=> {
            displayTerritoryRoute();
        });

        function displayTerritoryRoute(){
            var route = "";
            var from = $('#round1objective1from').val();
            var to = $('#round1objective1to').val();
            
            if(from !== "" && to !== "") {
                getTerrorityRoute(from, to, function (data){
                    route = JSON.stringify(data);
                    $('#round1objective1route').html(route);
                });
            }
        }

        function getTerrorityRoute(from, to, callback) {
            settings = {
                "async": true,
                "crossDomain": true,
                "url": "http://localhost:3000/routes/" + from + "/" + to,
                "method": "GET"
            }

            $.ajax(settings).done(function (response) {
                callback(response);
            });
        }
    </script>
    </body>
</html>